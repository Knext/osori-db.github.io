<div class="header-dropdown pl-8">
    <div class="language-div">
        <button class="change-language-btn shared-language-btn" onclick="showLanguageOptions()">
            <i class="fa-solid fa-globe pr-2"></i>
            {% if site.lang == site.languages[0] %}
            {{ site.languageNames.en }}
            {% else %}
            {{ site.languageNames.ko }}
            {% endif %}
        </button>
        <i class="change-language-btn fa-solid fa-chevron-down pl-3 chevron-icon" onclick="showLanguageOptions()"></i>
    </div>
    <div class="header-dropdown-content" id="language-dropdown">
        {% if site.lang == site.languages[0] %}
        <a id="kor-lang-link"><i class="fa-solid fa-earth-asia mr-1"></i> {{ site.languageNames.ko }}</a>
        {% else %}
        <a id="eng-lang-link"><i class="fa-solid fa-earth-americas mr-1"></i> {{ site.languageNames.en }}</a>
        {% endif %}
    </div>
</div>

<script>
    // for language toggle on documentation pages header
    const OCCURRENCE = 3;
    var currentURL = window.location.href;
    var isKorean = currentURL.includes('/ko');

    if (isKorean) {
        var anchor = document.getElementById('eng-lang-link');
        var index = getIndex(currentURL, '/', OCCURRENCE);

        var firstSubstring = currentURL.substring(0, index);
        var secondSubstring = currentURL.substring(index + 4);

        anchor.href = firstSubstring + '/' + secondSubstring;
    } else {
        var anchor = document.getElementById('kor-lang-link');
        var index = getIndex(currentURL, '/', OCCURRENCE);

        var firstSubstring = currentURL.substring(0, index);
        var secondSubstring = currentURL.substring(index + 1);

        anchor.href = firstSubstring + '/ko/' + secondSubstring;
    }

    function getIndex(str, searchKey, occurrence) {
        return str.split(searchKey, occurrence).join(searchKey).length;
    }

    function showLanguageOptions() {
        document.getElementById("language-dropdown").classList.toggle("show");
    }
    window.onclick = function (e) {
        if (!e.target.matches('.change-language-btn')) {
            var languageDropdown = document.getElementById("language-dropdown");
            if (languageDropdown.classList.contains('show')) {
                languageDropdown.classList.remove('show');
            }
        }
    }


    // for dynamic values for href of anchor tags
    const LINK_DOCS = '/docs';
    const LINK_KO = '/ko';
    const LINKS = {
        ABOUT: {
            name: 'About',
            url: '/about/',
        },
        MOTIVATION: {
            name: 'Motivation',
            url: '/about/motivation/',
        },
        CHARTER: {
            name: 'Charter',
            url: '/about/charter/',
        },
        MEMBERS: {
            name: 'Members',
            url: '/about/members/',
        },
        LOGO: {
            name: 'Logo',
            url: '/about/logo/',
        },

        GUIDE: {
            name: 'Guide',
            url: '/guide/',
        },
        USER_TIPS: {
            name: 'User Tips',
            url: '/guide/user-tips/',
        },
        API_DOC: {
            name: 'API Doc',
            url: '/guide/api-doc/',
        },
        CONTRIBUTION_GUIDE: {
            name: 'Contribution Guide',
            url: '/guide/contribution-guide/',
        },

        LICENSE: {
            name: 'License',
            url: '/license/',
        },
        OSORI_LICENSE_AND_NOTICE: {
            name: 'OSORI License and Notice',
            url: '/license/osori-license-and-notice/',
        },
        NOTICE_ON_USAGE_RESTRICTION_BY_HEAVY_TRAFFIC: {
            name: 'Notice on Usage Restriction by Heavy Traffic',
            url: '/license/notice-on-usage-restriction-by-heavy-traffic/',
        },
        NO_WARRANTY: {
            name: 'No Warranty',
            url: '/license/no-warranty/',
        },
        DOC_LICENSE: {
            name: 'Doc. License',
            url: '/license/doc-license/',
        },
        CODE_LICENSE: {
            name: 'Code License',
            url: '/license/code-license/',
        },

        NEWS: {
            name: 'News',
            url: '/news/',
        },
        FAQ: {
            name: 'FAQ',
            url: '/faq/',
        }
    };

    var anchorList = document.getElementsByTagName('a');
    console.log(isKorean);
    for (var i = 0; i < anchorList.length; i++) {
        console.log(anchorList[i].href);
    }


</script>